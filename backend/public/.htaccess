RewriteEngine On

# Handle frontend assets and files (let them be served directly)
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule .* - [L]

# Handle frontend assets in subdirectory
RewriteCond %{REQUEST_URI} ^/tradeborn_realms/assets/
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule .* - [L]

# Handle API routes - send to backend
RewriteCond %{REQUEST_URI} ^/tradeborn_realms/api/
RewriteRule ^tradeborn_realms/api/(.*)$ /tradeborn_realms/backend/public/index.php [QSA,L]

# Handle frontend routes (for React Router) - send to index.html
RewriteCond %{REQUEST_URI} ^/tradeborn_realms/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^tradeborn_realms/(.*)$ /tradeborn_realms/index.html [L]

# Fallback for root-level API access
RewriteCond %{REQUEST_URI} ^/api/
RewriteRule ^api/(.*)$ /tradeborn_realms/backend/public/index.php [QSA,L]
